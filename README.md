# PWP SPRING 2024
# Video Streaming API
# Group information
* Student 1. Muhammad Talha Arshad and muhammad.arshad@student.oulu.fi
* Student 2. Muhammad Ahmed and Muhammad.Ahmed@student.oulu.fi

__Remember to include all required documentation and HOWTOs, including how to create and populate the database, how to run and test the API, the url to the entrypoint and instructions on how to setup and run the client__

Database schema was generated by code first approach in C#, Dot NET 6 Web API, Entity Framework 6 

__Following are the required Libraries to be included in the [Project](https://gitlab.com/talhaarshad469/pwp-project-video-streaming/-/tree/main/PWPProject?ref_type=heads)__

* Microsoft.Data.SqlClient (5.1.5)
* Microsoft.EntityFrameworkCore.Abstraction (6.0.26)
* Microsoft.EntityFrameworkCore.Design (6.0.26)
* Microsoft.EntityFrameworkCore.Relational (6.0.26)
* Microsoft.EntityFrameworkCore.SqlServer (6.0.26)
* Microsoft.EntityFrameworkCore.Tools (6.0.26)
* Swashbuckle.AspNetCore (6.5.0)
* System.Data.SqlClient (4.8.6)

__Databse Information__


Database used in this project was
Microsoft SQL Server 2022 (RTM) - 16.0.1000.6 (X64)  


__Commands to generate and populate db schema__
__Commands to generate and populate db schema__


In package manager console, follow the following commands
1) add-migration "migration name"
2) update-database

after generating DB Schema, you can use the provided example DB scripts in the [Scripts](https://gitlab.com/talhaarshad469/pwp-project-video-streaming/-/blob/main/DBScripts/Populate%20DB.sql?ref_type=heads) to populate the database 

__DB on delete and onupdate cascade__


DB Design is such that each user can have many videos but video must have one user and for each vote/bookmark it is necessary to have video Id attached to it. So on the delete of some video from the database related votes and bookmarks should also be remooved and same goes for users hirerachy

To test these steps, please refer to the following of [test](https://gitlab.com/talhaarshad469/pwp-project-video-streaming/-/blob/main/DBScripts/Test%20DB.sql?ref_type=heads)


after generating DB Schema, you can use the provided example DB scripts in the [Scripts](https://gitlab.com/talhaarshad469/pwp-project-video-streaming/-/blob/main/DBScripts/Populate%20DB.sql?ref_type=heads) to populate the database 



__DB on delete and onupdate cascade__


DB Design is such that each user can have many videos but video must have one user and for each vote/bookmark it is necessary to have video Id attached to it. So on the delete of some video from the database related votes and bookmarks should also be remooved and same goes for users hirerachy

To test these steps, please refer to the following of [test](https://gitlab.com/talhaarshad469/pwp-project-video-streaming/-/blob/main/DBScripts/Test%20DB.sql?ref_type=heads)

__Run Server Instructions__

Follow the steps
1) Clone the repo PWPProject 
2) Change DB Name in appSettings.json file according to above setup
3) navigate to the directory pwp-project-video-streaming\PWPProject
4) in cmd, write dotnet run
Note Please escure dot net sdk 8 is installed in the system


__URL to Access the API__


you can access the Swagger UI on the following url
https://app.swaggerhub.com/apis/TALHAARSHAD39/video-streaming_api_open_api_3_0/1.0.11


you can access the URL base on the following url
https://developmentapi.deldiosmotorclubadmin.com

Here are the endpoints for operations on the API


Important!JWT token is necessary with the requests marked [Authorized] in authorization as Bearer Token to get the access of the resources. (Role = Admin) are only authorized to the users with the role of Admin

1) POST         /authentication                  -- It return the JWT Token if user exists in the system
2) GET         /Videos  -- to get all the videos that will be showing on the home page of the application
3) GET         /Video/GetVideo/{id}      --             to get the video with some specific Id of the video
4) POST        [Authorized] (Role = Admin)/Videos/PostVideo            --       to submit a video to the system, Video data should be sent through request body
5) POST        [Authorized] /Vote --        Vote a video with the vote data in the body of the request
6) POST        [Authorized] /Bookmark    --      bookmark a video with the bookmark data in the body of the request
7) DELETE      [Authorized] (Role = Admin) --/Video/{id}  --    Delete a video with a specific Video Id  
8) POST       /Users --    Create a new user in the system
9) GET        [Authorized] (Role = Admin) -- /User/{id} -- Get the data of any user with the Id
10) PUT        [Authorized] /Bookmark    --     update bookmark of a video
11) GET        [Authorized] (Role = Admin)-- /User/GetUser/{id} -- Get the data of any user with the Id
12) GET         -- /stats -- Get the data of the application stats

__Steps to start client application__

ReactJS has been used in this project for the client side implementation

To start the projecta at local please follow the following steps
1) clone the PWP Project Video Streaming > mediaclient
2) open terminal to the directory and run following commands
    npm install
3) after all required installation, again write in the terminal as
    npm start
4) For the sake of understaing, API end is being hosted in the example to check the service and client

Client Side is also availble to visit in the following URL of Netlify
https://videostreamingclient.netlify.app/

please use these credentials for admin account
email : talha@ibex.co
password: talha

Rest, you can make users accounts by signup



__Running Test Cases__

Test cases are written to check functinal testing and end points testing. Functional testing results could be seen as no database change happens in that cases but in end point
testing, we will be using test DB and you can run this script to make Test DB in Database used in the project

 [DB Script](https://gitlab.com/talhaarshad469/pwp-project-video-streaming/-/blob/main/DBScripts/TestCasesDBScript.txt?ref_type=heads)

Instructions:


1) Create Database Name
2) Create tables in the script
3) Insert Data
4) After testing, make sure to delete data before next test 

After DB creation and mock test data change DB name in the PWPProject to newly created DB deploye the API for testing

navigate to the directory PWPProject > PWPUnitTest and run the following command


dotnet test


You will see the results on the terminal

Thanks

________________________________________
__Changes done for re-checking of the project__
1) Test Coverage 
2) URL Convertors
3) Documentation to run the server
4) Hypermedia State Diagram
5) Linting UI Code
6) Use Link Relations (in 2 calls)
7) Auxilary API Implementation
8) Linting Auxilary Service
9) Analysis and Reflection

